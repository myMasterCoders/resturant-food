import{u as O}from"./CER20gh2.js";import{u as j,r as b,s as I,V as K,o as a,c as r,a as e,F as x,x as k,b as s,w as p,v as _,t as F,d as E,B as V,a6 as $,_ as T,a7 as A,p as B,e as N}from"./CEHpqohg.js";const L={class:"addresses"},X={class:"container mx-auto p-1"},R={class:"w-full h-auto"},Y={class:"flex flex-row items-center justify-between w-full flex-wrap"},D=["id"],H={class:"w-5/12"},W={class:"w-5/12"},z={class:"w-5/12"},G=["value"],J={class:"w-5/12"},M=["value"],Q=e("br",null,null,-1),U={class:"w-full"},Z={key:0,class:"inline-block h-5 w-5 mx-2 animate-spin rounded-full border-4 border-solid border-current border-e-transparent align-[-0.125em] text-surface motion-reduce:animate-[spin_1.5s_linear_infinite] dark:text-white",role:"status"},ee={class:"my-auto"},te={key:0,class:"inline-block h-5 w-5 mx-2 animate-spin rounded-full border-4 border-solid border-current border-e-transparent align-[-0.125em] text-surface motion-reduce:animate-[spin_1.5s_linear_infinite] dark:text-white",role:"status"},se={__name:"Edit",async setup(g){let l,w;const S=j(),m=b(null),n=b(!1),q=b([]),h=b(null),{data:v,refresh:C}=([l,w]=I(()=>O("/api/address/addresses",{headers:$()},"$IYeYSKR4Xa")),l=await l,w(),l);console.log("address",v.value);async function f(d){try{n.value=!0;const u=await $fetch("/api/address/edit",{method:"POST",body:{...d,address_id:m.value},headers:$(["cookie"])});S.success("ویرایش ادرس با موفقیت انجام شد",{position:"top-right",timeout:3e3,rtl:!0}),console.log(u)}catch(u){q.value=Object.values(u.data.data.message).flat()}finally{n.value=!1}}function c(d){h.value.node.input(v.value.cities.find(u=>u.province_id==d.target.value).id)}async function i(){try{n.value=!0;const d=await $fetch("/api/address/delete",{method:"POST",body:{address_id:m.value},headers:$(["cookie"])});S.warning("حذف ادرس با موفقیت انجام شد",{position:"top-right",timeout:3e3,rtl:!0}),C(),console.log(d)}catch(d){q.value=Object.values(d.data.data.message).flat()}finally{n.value=!1}}return(d,u)=>{const t=K("FormKit");return a(),r("section",L,[e("div",X,[e("div",R,[e("div",Y,[(a(!0),r(x,null,k(_(v).addresses,y=>(a(),r("div",{key:y.id},[s(t,{onSubmit:f,type:"form",actions:!1,"incomplete-message":!1,style:{width:"100%",display:"flex","flex-direction":"row","flex-wrap":"wrap"}},{default:p(({value:P})=>[e("div",{class:"w-5/12",id:m.value=y.id},[s(t,{value:y.title,type:"text",label:"عنوان",name:"title",id:"title",validation:"required","validation-messages":{required:"فیلد روردی الزامی است"},"messages-class":"text-red-600","input-class":"p-2 border border-1 border-slate-100"},null,8,["value"])],8,D),e("div",H,[s(t,{value:y.cellphone,type:"text",label:"شماره تماس",name:"cellphone",id:"cellphone",validation:[["required"],["matches",/^(\+98|0)?9\d{9}$/ig]],"validation-messages":{matches:"فیلد ورودی نامعتبر است",required:"فیلد روردی الزامی است"},"messages-class":"text-red-600","input-class":"p-2 border border-1 border-slate-100"},null,8,["value"])]),e("div",W,[s(t,{value:y.postal_code,type:"text",label:"کد پستی",name:"postal_code",id:"postal_code",validation:[["required"],["matches",/^\d{5}[ -]\d{5}$/ig]],"validation-messages":{matches:"فیلد روردی نامعتبر است",required:"فیلد روردی الزامی است"},"messages-class":"text-red-600","input-class":"p-2 border border-1 border-slate-100"},null,8,["value"])]),e("div",z,[s(t,{onChange:c,type:"select",label:"استان ها",name:"province_id",id:"province_id",validation:"required","validation-messages":{required:"فیلد روردی الزامی است"},"messages-class":"text-red-600","input-class":"p-2 border border-1 border-slate-100"},{default:p(()=>[(a(!0),r(x,null,k(_(v).provinces,o=>(a(),r("option",{key:o.id,value:o.id},F(o.name),9,G))),128))]),_:1})]),e("div",J,[s(t,{ref_for:!0,ref_key:"cityEl",ref:h,type:"select",label:"شهر ها",name:"city_id",id:"city_id",validation:"required","validation-messages":{required:"فیلد روردی الزامی است"},"messages-class":"text-red-600","input-class":"p-2 border border-1 border-slate-100"},{default:p(()=>[(a(!0),r(x,null,k(_(v).cities.filter(o=>o.province_id==P.province_id),o=>(a(),r("option",{key:o.id,value:o.id},F(o.name),9,M))),128))]),_:2},1536)]),Q,e("div",U,[s(t,{value:y.address,style:{width:"100%",height:"150px"},type:"textarea",label:"ادرس",name:"address",id:"address",validation:"required","validation-messages":{required:"فیلد روردی الزامی است"},"messages-class":"text-red-600","input-class":"p-2 border border-1 border-slate-100"},null,8,["value"])]),s(t,{type:"submit","input-class":" my-4 bg-sky-600 px-8 py-2 text-slate-100 rounded-xl"},{default:p(()=>[E(" ویرایش "),_(n)?(a(),r("div",Z)):V("",!0)]),_:1}),e("div",ee,[e("div",{onClick:i,class:"bg-red-600 px-8 py-2 mx-4 rounded-xl text-slate-100"},[E(" حذف ادرس "),_(n)?(a(),r("div",te)):V("",!0)])])]),_:2},1024)]))),128))])])])])}}},ae=g=>(B("data-v-db4b2b49"),g=g(),N(),g),re={class:"addresses"},ie={class:"container mx-auto p-1"},de={class:"w-full h-auto"},le={class:"flex flex-row items-center justify-between w-full flex-wrap"},oe={class:"w-5/12"},ne={class:"w-5/12"},ce={class:"w-5/12"},ue={class:"w-5/12"},_e=["value"],pe={class:"w-5/12"},me=["value"],ve=ae(()=>e("br",null,null,-1)),be={class:"w-full"},he={key:0,class:"inline-block h-5 w-5 mx-2 animate-spin rounded-full border-4 border-solid border-current border-e-transparent align-[-0.125em] text-surface motion-reduce:animate-[spin_1.5s_linear_infinite] dark:text-white",role:"status"},fe={__name:"addresses",async setup(g){let l,w;const S=j(),m=b(!1),n=b([]),q=b(null),{data:h}=([l,w]=I(()=>O("/api/address/addresses",{headers:$()},"$fbC6LVXWXV")),l=await l,w(),l);async function v(f){try{m.value=!0;const c=await $fetch("/api/address/create",{method:"POST",body:f,headers:$(["cookie"])});S.success("ایجاد ادرس با موفقیت انجام شد",{position:"top-right",timeout:3e3,rtl:!0}),A("myForm"),console.log(c)}catch(c){n.value=Object.values(c.data.data.message).flat()}finally{m.value=!1}}function C(f){let c=h.value.cities.find(i=>i.province_id==f.target.value).id;q.value.node.input(c)}return(f,c)=>{const i=K("FormKit"),d=se;return a(),r(x,null,[e("section",re,[e("div",ie,[e("div",de,[e("div",le,[s(i,{id:"myForm",onSubmit:v,type:"form",actions:!1,"incomplete-messages":!1,style:{width:"100%",display:"flex","flex-direction":"row","flex-wrap":"wrap"}},{default:p(({value:u})=>[e("div",oe,[s(i,{type:"text",label:"عنوان",name:"title",id:"title",validation:"required","validation-messages":{required:"فیلد روردی الزامی است"},"messages-class":"text-red-600","input-class":"p-2 border border-1 border-slate-100"})]),e("div",ne,[s(i,{type:"text",label:"شماره تماس",name:"cellphone",id:"cellphone",validation:[["required"],["matches",/^(\+98|0)?9\d{9}$/ig]],"validation-messages":{matches:"فیلد ورودی نامعتبر است",required:"فیلد روردی الزامی است"},"messages-class":"text-red-600","input-class":"p-2 border border-1 border-slate-100"})]),e("div",ce,[s(i,{type:"text",label:"کد پستی",name:"postal_code",id:"postal_code",validation:[["required"],["matches",/^\d{5}[ -]\d{5}$/ig]],"validation-messages":{matches:"فیلد روردی نامعتبر است",required:"فیلد روردی الزامی است"},"messages-class":"text-red-600","input-class":"p-2 border border-1 border-slate-100"})]),e("div",ue,[s(i,{onChange:C,type:"select",label:"استان ها",name:"province_id",id:"province_id",validation:"required","validation-messages":{required:"فیلد روردی الزامی است"},"messages-class":"text-red-600","input-class":"p-2 border border-1 border-slate-100"},{default:p(()=>[(a(!0),r(x,null,k(_(h).provinces,t=>(a(),r("option",{key:t.id,value:t.id},F(t.name),9,_e))),128))]),_:1})]),e("div",pe,[s(i,{ref_key:"cityEl",ref:q,type:"select",label:"شهر ها",name:"city_id",id:"city_id",validation:"required","validation-messages":{required:"فیلد روردی الزامی است"},"messages-class":"text-red-600","input-class":"p-2 border border-1 border-slate-100"},{default:p(()=>[(a(!0),r(x,null,k(_(h).cities.filter(t=>t.province_id==u.province_id),t=>(a(),r("option",{key:t.id,value:t.id},F(t.name),9,me))),128))]),_:2},1536)]),ve,e("div",be,[s(i,{style:{width:"100%",height:"150px"},type:"textarea",label:"ادرس",name:"address",id:"address",validation:"required","validation-messages":{required:"فیلد روردی الزامی است"},"messages-class":"text-red-600","input-class":"p-2 border border-1 border-slate-100"})]),s(i,{type:"submit","input-class":" my-4 bg-sky-600 px-8 py-2 text-slate-100 rounded-xl"},{default:p(()=>[E(" ایجاد "),_(m)?(a(),r("div",he)):V("",!0)]),_:1})]),_:1})])])])]),e("section",null,[s(d)])],64)}}},ge=T(fe,[["__scopeId","data-v-db4b2b49"]]);export{ge as default};
